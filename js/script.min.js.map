{"version":3,"sources":["script.js"],"names":["menuMobile","document","getElementById","menuMobileOpenBtn","querySelector","menuMobileCloseBtn","evt","preventDefault","onclick","menuLinks","querySelectorAll","i","getAttribute","hash","substring","scrollIntoView","behavior","contains","history","pushState","_loop","overlay","filter","filterOpenBtn","filterCloseBtn","elementOpen","elementClose","sortingToggleBtn","sorting","sortingOptions","offsetHeight","length","styleElmnt","createElement","concat","sortingOptionsHeight","classList","window","handleOutsideClick","addEventListener","sortingClose","reservation","thanks","reservationCloseBtn","reservationOpenBtn","thanksCloseBtn","reservationForm","onsubmit","j","thanksOkBtn","initYaMap","ymaps","map","Map","center","zoom","remove","controls","Placemark","getCenter","hintContent","mapPlacemark","iconLayout","iconImageHref","iconImageSize","geoObjects","add","elmnt","cls","ovrl","arguments","undefined","elmnt1","elmnt2","cssAnimationReset","removeAttribute","lastChild","removeEventListener","target","offsetWidth","onkeydown","keyCode","Glide","type","gap","perView","breakpoints","639","classes","mount","scriptElmnt","src","setTimeout"],"mappings":"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","file":"script.min.js","sourcesContent":["// Оживление мобильного меню\nconst menuMobile = document.getElementById(`menu`);\nconst menuMobileOpenBtn = document.querySelector(`.header__menu-toggle`);\nconst menuMobileCloseBtn = menuMobile.querySelector(`.menu-mobile__close`);\n\nmenuMobileOpenBtn.onclick = (evt) => {\n  evt.preventDefault();\n  elementOpen(menuMobile, `menu-mobile--shown`, false);\n};\n\nmenuMobileCloseBtn.onclick = (evt) => {\n  evt.preventDefault();\n  elementClose(menuMobile, `menu-mobile--shown`, false);\n};\n\n// Плавная прокрутка к якорю\nconst menuLinks = document.querySelectorAll(`.menu__link`);\n\nfor (let i = 0; i < menuLinks.length; i++) {\n  if (menuLinks[i].getAttribute(`href`)[0] === `#`) {\n    menuLinks[i].onclick = (evt) => {\n      evt.preventDefault();\n      document.getElementById(menuLinks[i].hash.substring(1)).scrollIntoView({behavior: `smooth`});\n      history.pushState(null, null, menuLinks[i].hash);\n\n      // Закрытие мобильного меню после клика по ссылке\n      if (menuMobile.contains(menuLinks[i])) {\n        elementClose(menuMobile, `menu-mobile--shown`, false);\n      }\n    };\n  }\n}\n\n// Оживление фильтра каталога\nconst overlay = document.querySelector(`.overlay`);\nconst filter = document.querySelector(`.filter`);\n\nif (filter) {\n  const filterOpenBtn = document.querySelector(`.catalog__filter`);\n  const filterCloseBtn = filter.querySelector(`.filter__close`);\n\n  filterOpenBtn.onclick = (evt) => {\n    evt.preventDefault();\n    elementOpen(filter, `filter--shown`);\n  };\n\n  filterCloseBtn.onclick = (evt) => {\n    evt.preventDefault();\n    elementClose(filter, `filter--shown`);\n  };\n}\n\n// Оживление выпадающего меню сортировки\nconst sorting = document.querySelector(`.sorting`);\n\nif (sorting) {\n  const sortingToggleBtn = sorting.querySelector(`.sorting__option--toggle`);\n  const sortingOptions = sorting.querySelectorAll(`.sorting__options .sorting__option`);\n\n  // Создание CSS-правил для анимации меню сортировки\n  const sortingOptionsHeight = sortingToggleBtn.offsetHeight * sortingOptions.length;\n  const styleElmnt = document.createElement(`style`);\n\n  document.head.appendChild(styleElmnt);\n  styleElmnt.sheet.insertRule(`@keyframes sorting{from{height:0}to{height:${sortingOptionsHeight}px}}`, 0);\n\n  // Появление и закрытие меню сортировки\n  sortingToggleBtn.onclick = (evt) => {\n    evt.preventDefault();\n\n    if (sorting.classList.contains(`sorting--opened`)) {\n      sortingClose();\n    } else {\n      elementOpen(sorting, `sorting--opened`, false);\n      window.addEventListener(`click`, handleOutsideClick);\n    }\n  };\n\n  for (let i = 0; i < sortingOptions.length; i++) {\n    sortingOptions[i].onclick = () => {\n      sortingClose();\n    };\n  }\n}\n\n// Оживление всплывающих окон бронирования и подтверждения заявки\nconst reservation = document.querySelector(`.modal--reservation`);\nconst thanks = document.querySelector(`.modal--thanks`);\n\nif (reservation) {\n  // Оживление всплывающего окна бронирования\n  const reservationOpenBtn = document.querySelector(`.room__button`);\n  const reservationCloseBtn = reservation.querySelector(`.modal__close`);\n\n  reservationOpenBtn.onclick = (evt) => {\n    evt.preventDefault();\n    elementOpen(reservation, `modal--shown`);\n  };\n\n  reservationCloseBtn.onclick = (evt) => {\n    evt.preventDefault();\n    elementClose(reservation, `modal--shown`);\n  };\n\n  // Оживление всплывающего окна подтверждения заявки\n  const thanksOkBtn = thanks.querySelector(`.button`);\n  const thanksCloseBtn = thanks.querySelector(`.modal__close`);\n  const reservationForm = reservation.querySelector(`.reservation-form`);\n\n  reservationForm.onsubmit = (evt) => {\n    evt.preventDefault(); // Форма не отправляется, это сделано для демонстрации всплывающих окон\n    elementClose(reservation, `modal--shown`, false);\n    elementOpen(thanks, `modal--shown`, false);\n  };\n\n  for (let i = 0, j = [thanksOkBtn, thanksCloseBtn]; i < j.length; i++) {\n    j[i].onclick = (evt) => {\n      evt.preventDefault();\n      elementClose(thanks, `modal--shown`);\n    };\n  }\n}\n\n// Закрытие всплывающих окон клавишей ESC\nwindow.onkeydown = (evt) => {\n  if (evt.keyCode === 27) {\n    evt.preventDefault();\n\n    // Закрытие мобильного меню\n    if (menuMobile.classList.contains(`menu-mobile--shown`)) {\n      elementClose(menuMobile, `menu-mobile--shown`, false);\n    }\n\n    // Закрытие фильтра каталога\n    if (filter && filter.classList.contains(`filter--shown`)) {\n      elementClose(filter, `filter--shown`);\n    }\n\n    // Закрытие меню сортировки\n    if (sorting && sorting.classList.contains(`sorting--opened`)) {\n      sortingClose();\n    }\n\n    // Закрытие окна бронирования\n    if (reservation && reservation.classList.contains(`modal--shown`)) {\n      elementClose(reservation, `modal--shown`);\n    }\n\n    // Закрытие окна подтверждения заявки\n    if (thanks && thanks.classList.contains(`modal--shown`)) {\n      elementClose(thanks, `modal--shown`);\n    }\n  }\n};\n\n// Закрытие всплывающих окон по клику вне окна\nif (overlay) {\n  overlay.onclick = () => {\n    // Закрытие фильтра каталога\n    if (filter && filter.classList.contains(`filter--shown`)) {\n      elementClose(filter, `filter--shown`);\n    }\n\n    // Закрытие окна бронирования\n    if (reservation && reservation.classList.contains(`modal--shown`)) {\n      elementClose(reservation, `modal--shown`);\n    }\n\n    // Закрытие окна подтверждения заявки\n    if (thanks && thanks.classList.contains(`modal--shown`)) {\n      elementClose(thanks, `modal--shown`);\n    }\n  };\n}\n\n// Оживление слайдера номеров\nif (document.querySelector(`.slider--rooms .slider__inner`)) {\n  new Glide(`.slider--rooms .slider__inner`, {\n    type: `carousel`,\n    gap: 30,\n    classes: {\n      activeNav: `slider__bullet--active`\n    }\n  }).mount();\n}\n\n// Оживление слайдера отзывов\nif (document.querySelector(`.slider--testimonials .slider__inner`)) {\n  new Glide(`.slider--testimonials .slider__inner`, {\n    type: `carousel`,\n    perView: 2,\n    gap: 30,\n    breakpoints: {\n      943: {\n        perView: 1\n      },\n      767: {\n        perView: 2\n      },\n      639: {\n        perView: 1\n      }\n    },\n    classes: {\n      activeNav: `slider__bullet--active`\n    }\n  }).mount();\n}\n\n// Оживление галереи номера\nif (document.querySelector(`.room__gallery`)) {\n  new Glide(`.room__gallery`, {\n    type: `carousel`,\n    gap: 30,\n    classes: {\n      activeNav: `room__gallery-preview--active`\n    }\n  }).mount();\n}\n\n// Создание скрипта интерактивной карты\nwindow.setTimeout(() => {\n  const scriptElmnt = document.createElement(`script`);\n\n  scriptElmnt.src = `https://api-maps.yandex.ru/2.1/?apikey=56dd7dfa-9b89-4846-bd0c-6d22404cf29e&lang=ru_RU&load=package.standard&onload=initYaMap`;\n  document.body.appendChild(scriptElmnt);\n}, 2000);\n\n// Инициализация интерактивной карты\nfunction initYaMap(ymaps) {\n  const map = new ymaps.Map(document.querySelector(`.contacts__map`), {\n    center: [59.938635, 30.323118],\n    zoom: 16\n  });\n  map.controls.remove(`searchControl`);\n  map.controls.remove(`routeButtonControl`);\n  map.controls.remove(`trafficControl`);\n  map.controls.remove(`typeSelector`);\n  map.controls.remove(`rulerControl`);\n\n  const mapPlacemark = new ymaps.Placemark(map.getCenter(), {\n    hintContent: `Санкт-Петербург,<br>ул Большая Конюшенная, д 19`\n  }, {\n    iconLayout: `default#image`,\n    iconImageHref: `img/contacts_map-marker.svg`,\n    iconImageSize: [54, 77],\n    iconImageOffset: [-27, -52]\n  });\n  map.geoObjects.add(mapPlacemark);\n}\n\n// Появление элемента\nfunction elementOpen(elmnt, cls, ovrl = true) {\n  elmnt.classList.add(cls);\n\n  if (ovrl) {\n    elementOpen(overlay, `overlay--shown`, false);\n  }\n}\n\n// Закрытие элемента\nfunction elementClose(elmnt1, cls, ovrl = true, elmnt2 = elmnt1) {\n  cssAnimationReset(elmnt1, cls);\n  elmnt2.style.animationDirection = `reverse`;\n\n  if (ovrl) {\n    elementClose(overlay, `overlay--shown`, false);\n  }\n\n  window.setTimeout(() => {\n    elmnt1.classList.remove(cls);\n    elmnt2.removeAttribute(`style`);\n  }, 500);\n}\n\n// Закрытие меню сортировки\nfunction sortingClose() {\n  elementClose(sorting, `sorting--opened`, false, sorting.lastChild);\n  window.removeEventListener(`click`, handleOutsideClick);\n}\n\n// Закрытие меню сортировки по клику вне меню\nfunction handleOutsideClick(evt) {\n  if (!sorting.contains(evt.target)) {\n    evt.preventDefault();\n    sortingClose();\n  }\n}\n\n// Сброс CSS-анимации\nfunction cssAnimationReset(elmnt, cls) {\n  elmnt.classList.remove(cls);\n  void elmnt.offsetWidth;\n  elmnt.classList.add(cls);\n}\n"]}